function initMap(){map=new google.maps.Map(document.getElementById("map"),{center:{lat:30.3071816,lng:-97.7559964},zoom:13,styles:style,mapTypeControl:!1});for(var e=[{title:"North Loop",location:{lat:30.318867,lng:-97.718588}},{title:"Central Austin",location:{lat:30.296171,lng:-97.738954}},{title:"Downtown Austin",location:{lat:30.272921,lng:-97.744386}},{title:"East Austin",location:{lat:30.274415,lng:-97.715923}},{title:"South Lamar",location:{lat:30.236265,lng:-97.782422}}],t=new google.maps.InfoWindow,o=new google.maps.drawing.DrawingManager({drawingMode:google.maps.drawing.OverlayType.POLYGON,drawingControl:!0,drawingControlOptions:{position:google.maps.ControlPosition.TOP_LEFT,drawingModes:[google.maps.drawing.OverlayType.POLYGON]}}),n=makeMarkerIcon("0091ff"),a=makeMarkerIcon("ffff24"),i=0;i<e.length;i++){var l=e[i].location,s=e[i].title,r=new google.maps.Marker({position:l,title:s,icon:n,animation:google.maps.Animation.DROP,id:i});markers.push(r),r.addListener("click",function(){populateInfoWindow(this,t)}),r.addListener("mouseover",function(){this.setIcon(a)}),r.addListener("mouseout",function(){this.setIcon(n)})}document.getElementById("show-listings").addEventListener("click",showListings),document.getElementById("hide-listings").addEventListener("click",hideListings),document.getElementById("toggle-drawing").addEventListener("click",function(){toggleDrawing(o)}),o.addListener("overlaycomplete",function(e){polygon&&(polygon.setMap(null),hideListings()),o.setDrawingMode(null),polygon=e.overlay,polygon.setEditable(!0),searchWithinPolygon(),polygon.getPath().addListener("set_at",searchWithinPolygon),polygon.getPath().addListener("insert_at",searchWithinPolygon)})}function populateInfoWindow(e,t){function o(o,n){if(n==google.maps.StreetViewStatus.OK){var a=o.location.latLng,i=google.maps.geometry.spherical.computeHeading(a,e.position);t.setContent("<div>"+e.title+'</div><div id="pano"></div>');var l={position:a,pov:{heading:i,pitch:30}};new google.maps.StreetViewPanorama(document.getElementById("pano"),l)}else t.setContent("<div>"+e.title+"</div><div>No Street View Found</div>")}if(t.marker!=e){t.setContent(""),t.marker=e,t.addListener("closeclick",function(){t.marker=null});(new google.maps.StreetViewService).getPanoramaByLocation(e.position,50,o),t.open(map,e)}}function showListings(){for(var e=new google.maps.LatLngBounds,t=0;t<markers.length;t++)markers[t].setMap(map),e.extend(markers[t].position);map.fitBounds(e)}function hideListings(){for(var e=0;markers.length;e++)markers[e].setMap(null)}function makeMarkerIcon(e){return new google.maps.MarkerImage("http://chart.googleapis.com/chart?chst=d_map_spin&chld=1.15|0|"+e+"|40|_|%E2%80%A2",new google.maps.Size(21,34),new google.maps.Point(0,0),new google.maps.Point(10,34),new google.maps.Size(21,34))}function toggleDrawing(e){e.map?(e.setMap(null),polygon&&polygon.setMap(null)):e.setMap(map)}function searchWithinPolygon(){for(var e=0;e<markers.length;e++)google.maps.geometry.poly.containsLocation(markers[e].position,polygon)?markers[e].setMap(map):markers[e].setMap(null)}var map,markers=[],polygon=null,style=[{featureType:"water",stylers:[{color:"#19a0d8"}]},{featureType:"administrative",elementType:"labels.text.stroke",stylers:[{color:"#ffffff"},{weight:6}]},{featureType:"administrative",elementType:"labels.text.fill",stylers:[{color:"#e85113"}]},{featureType:"road.highway",elementType:"geometry.stroke",stylers:[{color:"#efe9e4"},{lightness:-40}]},{featureType:"transit.station",stylers:[{weight:9},{hue:"#e85113"}]},{featureType:"road.highway",elementType:"labels.icon",stylers:[{visibility:"off"}]},{featureType:"water",elementType:"labels.text.stroke",stylers:[{lightness:100}]},{featureType:"water",elementType:"labels.text.fill",stylers:[{lightness:-100}]},{featureType:"poi",elementType:"geometry",stylers:[{visibility:"on"},{color:"#f0e4d3"}]},{featureType:"road.highway",elementType:"geometry.fill",stylers:[{color:"#efe9e4"},{lightness:-25}]}];